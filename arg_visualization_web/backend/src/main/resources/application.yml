server:
  port: 8080
  tomcat:
    max-connections: 10000
    threads:
      max: 200
      min-spare: 10
    connection-timeout: 300000

spring:
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 524288000
      max-request-size: 524288000
      file-size-threshold: 10485760
      location: ${java.io.tmpdir}
      enabled: true
      resolve-lazily: false
  
  # 邮件服务器配置
  mail:
    host: smtp.qq.com  
    port: 587
    username: ${MAIL_USERNAME:1627330037@qq.com}  
    password: ${MAIL_PASSWORD:dpllqwzfouvsecji}   
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
    default-encoding: UTF-8

  # Redis配置
  data:
    redis:
      host: ${REDIS_HOST:127.0.0.1}
      port: 6379
      password: ${REDIS_PASSWORD:}
      database: 0
      timeout: 10000
      lettuce:
        pool:
          max-active: 8
          max-wait: -1
          max-idle: 8
          min-idle: 0

# 邮件调试配置
email:
  debug-mode: ${EMAIL_DEBUG_MODE:true}
  debug-recipient: ${EMAIL_DEBUG_RECIPIENT:1627330037@qq.com}
      
jwt:
  secret: ${JWT_SECRET_KEY:springbot-jwt-secret-key-2024-secure-and-long-enough}
  expiration: ${JWT_EXPIRATION:86400000}

# 文件上传配置
file:
  upload:
    genome-dir: ${GENOME_UPLOAD_HOST_PATH:/home/data/uploads/genome}
    mag-dir: ${MAG_UPLOAD_HOST_PATH:/home/data/uploads/mag}
    max-size: 524288000

# Docker 配置 - 抗性基因检测
docker:
  enabled: ${DOCKER_ENABLED:true}
  command-prefix: ${DOCKER_COMMAND_PREFIX:}
  # ARG 配置
  arg:
    image-name: ${ARG_IMAGE:arg-bilstm:gpu}
    model-path: ${ARG_MODEL_PATH:/app/models}
    input-mount: ${ARG_INPUT_MOUNT:/input}
    output-mount: ${ARG_OUTPUT_MOUNT:/output}
    use-gpu: ${ARG_USE_GPU:true}
  # Prodigal 配置 (MAG 预处理)
  prodigal:
    image-name: ${PRODIGAL_IMAGE:prodigal:latest}
    timeout: ${PRODIGAL_TIMEOUT:600}
    parallel-threads: ${PRODIGAL_PARALLEL_THREADS:8}
    use-meta-mode: ${PRODIGAL_USE_META_MODE:true}

# 分析任务配置
analysis:
  output-dir: ${ANALYSIS_OUTPUT_HOST_PATH:/home/data/outputs}
  timeout: 3600
  queue-size: 100
